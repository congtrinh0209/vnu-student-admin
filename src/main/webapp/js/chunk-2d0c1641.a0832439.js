(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1641"],{"469b":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.textSearch,expression:"textSearch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập tiêu đề...",autocomplete:"off"},domProps:{value:t.textSearch},on:{input:function(a){a.target.composing||(t.textSearch=a.target.value)}}})]),e("v-col",{attrs:{cols:"12",sm:"1"}},[e("button",{staticClass:"btn btn-search primary",on:{click:function(a){return a.stopPropagation(),t.getListstudentFilter.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi mdi-magnify-minus-outline")])],1)]),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticStyle:{float:"right"}},[e("button",{staticClass:"btn btn-add primary",on:{click:function(a){return a.stopPropagation(),t.showModalForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Thêm mới ")],1)])])],1),e("v-row",{staticClass:"my-0 mb-3"},[e("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[e("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listStudent,"items-per-page":t.itemsPerPage,"item-key":"primKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.stt",fn:function(a){var i=a.index;return[e("td",[t._v(t._s(i+1))])]}},{key:"item.thaotac",fn:function(a){var i=a.item;return[t.isAdmin?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,o=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.editStudent(i)}}},"v-btn",o,!1),n),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Sửa")])]):t._e(),t.isAdmin?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,o=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.openDialogDeleteItem(i)}}},"v-btn",o,!1),n),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[e("span",[t._v("Xóa")])]):t._e()]}}])}),t.pageCount?e("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),t.dialogForm?e("div",[e("v-dialog",{attrs:{"max-width":"800px",persistent:"",fullscreen:""},model:{value:t.dialogForm,callback:function(a){t.dialogForm=a},expression:"dialogForm"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?e("v-toolbar-title",[t._v("Cập nhật sinh viên")]):t._e(),t.edittingForm?t._e():e("v-toolbar-title",[t._v("Thêm mới sinh viên")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("FormSinhVien",{ref:"formSinhVienBoRef",attrs:{dataEdit:t.dataEdit}}),e("v-card-text",{staticClass:"px-2 py-2"},[e("v-card-actions",{staticClass:"justify-center my-4"},[e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(a){return t.submitForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?e("span",[t._v("Cập nhật")]):e("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1)],1):t._e(),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogDelete,callback:function(a){t.dialogDelete=a},expression:"dialogDelete"}},[e("v-card",[e("v-card-title",{staticClass:"text-h5"},[t._v(" Bạn có muốn xóa không? ")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(a){t.dialogDelete=!1}}},[t._v(" Từ chối ")]),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.deleteStudent}},[t._v(" Xác nhận ")])],1)],1)],1)],1)},n=[],o=(e("13d5"),e("e20e")),s=e("854a"),l=e.n(s),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formSinhVienRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Mã sinh viên: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],solo:"",disabled:!!t.dataEdit.MaSinhVien,label:"Nhập mã sinh viên...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.MaSinhVien,callback:function(a){t.$set(t.formData,"MaSinhVien",a)},expression:"formData.MaSinhVien"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Số báo danh: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],disabled:!!t.dataEdit.SoBaoDanh,solo:"",label:"Nhập số báo danh...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.SoBaoDanh,callback:function(a){t.$set(t.formData,"SoBaoDanh",a)},expression:"formData.SoBaoDanh"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Mã nhập học: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{disabled:!!t.dataEdit.MaNhapHoc,rules:[t.rules.required],solo:"",label:"Nhập...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.MaNhapHoc,callback:function(a){t.$set(t.formData,"MaNhapHoc",a)},expression:"formData.MaNhapHoc"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Số hồ sơ: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],solo:"",label:"Nhập số hồ sơ...",dense:"","hide-details":"auto",disabled:!!t.dataEdit.SoHoSo},model:{value:t.formData.SoHoSo,callback:function(a){t.$set(t.formData,"SoHoSo",a)},expression:"formData.SoHoSo"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Họ và tên: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên đầy đủ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.HoVaTen,callback:function(a){t.$set(t.formData,"HoVaTen",a)},expression:"formData.HoVaTen"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Email VNU:")]),e("v-text-field",{attrs:{rules:[t.rules.email],solo:"",label:"Nhập email...",dense:"","hide-details":"auto",disabled:!!t.dataEdit.EmailVNU},model:{value:t.formData.EmailVNU,callback:function(a){t.$set(t.formData,"EmailVNU",a)},expression:"formData.EmailVNU"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Ngày sinh: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required,t.rules.birthday],solo:"",label:"Nhập ngày sinh...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.NgaySinh,callback:function(a){t.$set(t.formData,"NgaySinh",a)},expression:"formData.NgaySinh"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Giới tính: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-select",{attrs:{rules:[t.rules.required],items:t.optionGender,label:"Chọn",dense:"",solo:""},model:{value:t.formData.GioiTinh,callback:function(a){t.$set(t.formData,"GioiTinh",a)},expression:"formData.GioiTinh"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Địa chỉ:")]),e("v-text-field",{attrs:{solo:"",label:"Nhập địa chỉ...",dense:"","hide-details":"auto"},model:{value:t.formData.DiaChiThuongTru,callback:function(a){t.$set(t.formData,"DiaChiThuongTru",a)},expression:"formData.DiaChiThuongTru"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Tỉnh/thành:")]),e("v-select",{attrs:{items:t.optionProvince,label:"Chọn",dense:"",solo:""},on:{change:t.handleChangeProvince},model:{value:t.formData.TinhThanh,callback:function(a){t.$set(t.formData,"TinhThanh",a)},expression:"formData.TinhThanh"}})],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Quận/huyện:")]),e("v-select",{attrs:{items:t.optionDistrict,label:"Chọn",dense:"",solo:""},on:{change:t.hanldeChangeDistrict},model:{value:t.formData.QuanHuyen,callback:function(a){t.$set(t.formData,"QuanHuyen",a)},expression:"formData.QuanHuyen"}})],1),e("v-col",{attrs:{cols:"12",sm:"4"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Phường/xã:")]),e("v-select",{attrs:{items:t.optionWard,label:"Chọn",dense:"",solo:""},model:{value:t.formData.PhuongXa,callback:function(a){t.$set(t.formData,"PhuongXa",a)},expression:"formData.PhuongXa"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Cơ quan, đơn vị:")]),e("v-select",{attrs:{items:t.optionAgencies,label:"Chọn",dense:"",solo:""},model:{value:t.formData.CoQuanDonVi,callback:function(a){t.$set(t.formData,"CoQuanDonVi",a)},expression:"formData.CoQuanDonVi"}})],1)],1)],1)},c=[],d=e("2f62"),u=e("c1df"),h=e.n(u),m={props:["dataEdit"],data(){var t;return{formData:{MaSinhVien:this.dataEdit.MaSinhVien||"",SoBaoDanh:this.dataEdit.SoBaoDanh||"",GioiTinh:this.dataEdit.GioiTinh||"",HoVaTen:this.dataEdit.HoVaTen||"",MaNhapHoc:this.dataEdit.MaNhapHoc||"",SoHoSo:this.dataEdit.SoHoSo||"",NgaySinh:this.dataEdit.NgaySinh?h.a.utc(this.dataEdit.NgaySinh).format("DD/MM/YYYY"):"",EmailVNU:this.dataEdit.EmailVNU||"",DiaChiThuongTru:(null===(t=this.dataEdit.DiaChiThuongTru)||void 0===t?void 0:t.SoNhaChiTiet)||"",TinhThanh:this.dataEdit.TinhThanh,QuanHuyen:this.dataEdit.QuanHuyen||"",PhuongXa:this.dataEdit.PhuongXa||"",CoQuanDonVi:this.dataEdit.CoQuanDonVi||""},validForm:!1,optionPosition:[],optionDistrict:[],optionWard:[],optionGroups:[],rules:{required:t=>!!t||"Không được để trống.",email:t=>{const a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(t)||"Đây không phải là email"},birthday:t=>{const a=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;return a.test(t)||"Định dạng ngày sinh là: ngày/tháng/năm"}}}},mounted(){console.log("moun")},created(){var t,a;const e=this;console.log("cretate",this.dataEdit),null!==(t=e.dataEdit.TinhThanh)&&void 0!==t&&t.MaMuc&&e.getDistrict(e.dataEdit.TinhThanh.MaMuc),null!==(a=e.dataEdit.QuanHuyen)&&void 0!==a&&a.MaMuc&&e.getWard(e.dataEdit.QuanHuyen.MaMuc)},computed:{...Object(d["b"])(["listAgencies","listProvince","listGender"]),optionGender(){const t=this,a=t.listGender.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc}}));return a},optionAgencies(){const t=this,a=t.listAgencies.map(t=>({text:t.tenGoi,value:{MaHanhChinh:t.maHanhChinh,TenGoi:t.tenGoi}}));return a},optionProvince(){const t=this,a=t.listProvince.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc}}));return a}},methods:{getDistrict(t){const a=this;let e={collectionName:"quanhuyen",data:{page:0,size:20,keyword:"",orderFields:"",orderTypes:"",thamChieu_maMuc:t,tinhTrang:"1"}};a.$store.dispatch("collectionFilter",e).then((function(t){const e=t.content;a.optionDistrict=e.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc},districtCode:t.maMuc}))})).catch((function(){}))},getWard(t){const a=this;let e={collectionName:"phuongxa",data:{page:0,size:20,keyword:"",orderFields:"",orderTypes:"",thamChieu_maMuc:t,tinhTrang:"1"}};a.$store.dispatch("collectionFilter",e).then((function(t){const e=t.content;a.optionWard=e.map(t=>({text:t.tenMuc,value:{MaMuc:t.maMuc,TenMuc:t.tenMuc}}))})).catch((function(){}))},validateForm(){let t=this;return t.$refs.formSinhVienRef.validate()},handleChangeProvince(t){const a=this;a.optionDistrict=[],a.optionWard=[],a.getDistrict(t.MaMuc)},hanldeChangeDistrict(t){const a=this;console.log("dis",a.optionDistrict,t),a.getWard(t.MaMuc)}}},v=m,g=e("2877"),p=e("6544"),f=e.n(p),T=e("62ad"),D=e("4bd4"),b=e("0fd9"),S=e("b974"),M=e("8654"),y=Object(g["a"])(v,r,c,!1,null,null,null),C=y.exports;f()(y,{VCol:T["a"],VForm:D["a"],VRow:b["a"],VSelect:S["a"],VTextField:M["a"]});var x={components:{Pagination:o["a"],FormSinhVien:C},data(){return{textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:15},{sortable:!1,text:"Họ và tên",align:"left",value:"HoVaTen",class:"th-center",width:120},{sortable:!1,text:"Mã sinh viên",align:"left",value:"MaSinhVien",class:"th-center",width:120},{sortable:!1,text:"Email",align:"left",value:"EmailVNU",class:"th-center",width:120},{sortable:!1,text:"Số báo danh",align:"left",value:"SoBaoDanh",class:"th-center",width:120},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:68}],listStudent:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,idStudent:""}},created(){const t=this;t.getListStudent(),t.getList("listAgencies","coquandonvi"),t.getList("listProvince","tinhthanh",{tinhTrang:"1"}),t.getList("listGender","gioitinh",{tinhTrang:"1"})},mounted(){},methods:{getListstudentFilter(){const t=this;console.log("tim kiếm"),t.getListStudent({keyword:t.textSearch}),t.textSearch=""},getList(t,a,e){let i=this;const n={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""};let o={collectionName:a,state:t,data:e?{...n,...e}:n};i.$store.dispatch("collectionFilterInstore",o).then((function(t){console.log("res: ",t)})).catch((function(){console.log("Error")}))},getListStudent(t){let a=this;a.loadingData=!0;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},i={collectionName:"sinhvien",data:t?{...e,...t}:e};a.$store.dispatch("collectionFilter",i).then((function(t){console.log("res student: ",t),a.listStudent=t.content,a.total=a.listStudent.length,a.pageCount=t.totalPages,a.loadingData=!1})).catch((function(){a.loadingData=!1}))},openDialogDeleteItem(t){const a=this;console.log("id delete: ",t.PrimKey),a.dialogDelete=!0,a.idStudent=t.PrimKey},deleteStudent(){const t=this;t.dialogDelete=!1;const a={payload:t.idStudent,type:"sinhvien"};t.$store.dispatch("deleteItemData",a).then((function(a){l.a.success("Xóa thành công"),t.listStudent=t.listStudent.reduce((function(a,e){return t.idStudent!==e.PrimKey&&a.push(e),a}),[]),t.total=t.listStudent.length,console.log("res dele: ",a)})).catch((function(){t.loadingData=!1}))},editStudent(t){const a=this,e={...t,GioiTinh:{MaMuc:t.GioiTinh.MaMuc,TenMuc:t.GioiTinh.TenMuc},TinhThanh:{MaMuc:t.DiaChiThuongTru.TinhThanh.MaMuc,TenMuc:t.DiaChiThuongTru.TinhThanh.TenMuc},QuanHuyen:{MaMuc:t.DiaChiThuongTru.QuanHuyen.MaMuc,TenMuc:t.DiaChiThuongTru.QuanHuyen.TenMuc},PhuongXa:{MaMuc:t.DiaChiThuongTru.PhuongXa.MaMuc,TenMuc:t.DiaChiThuongTru.PhuongXa.TenMuc},CoQuanDonVi:{MaHanhChinh:t.CoQuanDonVi.MaHanhChinh,TenGoi:t.CoQuanDonVi.TenGoi}};a.edittingForm=!0,a.dataEdit=e,console.log("item edit: ",t),a.dialogForm=!0},handlechangePage(t){const a=this;a.getListStudent(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},submitForm(){const t=this;if(t.$refs.formSinhVienBoRef.validateForm()){const a=t.$refs.formSinhVienBoRef.formData,e={...a,MaSinhVien:a.MaSinhVien.replace(/ +/g,""),NgaySinh:h.a.utc(a.NgaySinh,"DD/MM/YYYY").format(),DiaChiThuongTru:{SoNhaChiTiet:a.DiaChiThuongTru,TinhThanh:a.TinhThanh,QuanHuyen:a.QuanHuyen,PhuongXa:a.PhuongXa},CoQuanDonVi:{...a.CoQuanDonVi}};if(delete e.TinhThanh,delete e.QuanHuyen,delete e.PhuongXa,t.edittingForm){const a={payload:e,type:"sinhvien",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",a).then((function(a){l.a.success("Cập nhật thành công"),t.dialogForm=!1,t.listStudent=t.listStudent.reduce((function(a,i){return t.dataEdit.PrimKey===i.PrimKey?[...a,{...e,PrimKey:t.dataEdit.PrimKey}]:[...a,i]}),[]),console.log("res edit: ",a,e,t.listStudent),t.dataEdit={}})).catch((function(){t.loadingData=!1,l.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const a={payload:e,type:"sinhvien"};t.$store.dispatch("createItemData",a).then((function(a){if(l.a.success("Thêm mới thành công"),t.dialogForm=!1,t.listStudent.length<t.itemsPerPage){const i=[...t.listStudent];i.push({...e,PrimKey:a.data.resp.PrimKey}),t.listStudent=i,t.total=t.listStudent.length}console.log("res post: ",a)})).catch((function(){t.loadingData=!1,l.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}console.log("submit",a,e)}}}},_=x,V=e("8336"),k=e("b0af"),E=e("99d9"),F=e("8fea"),P=e("169a"),N=e("132d"),H=e("2fa4"),w=e("71d9"),$=e("2a7f"),Q=e("3a2f"),G=Object(g["a"])(_,i,n,!1,null,"8695896a",null);a["default"]=G.exports;f()(G,{VBtn:V["a"],VCard:k["a"],VCardActions:E["a"],VCardText:E["b"],VCardTitle:E["c"],VCol:T["a"],VDataTable:F["a"],VDialog:P["a"],VIcon:N["a"],VRow:b["a"],VSpacer:H["a"],VToolbar:w["a"],VToolbarItems:$["a"],VToolbarTitle:$["b"],VTooltip:Q["a"]})}}]);