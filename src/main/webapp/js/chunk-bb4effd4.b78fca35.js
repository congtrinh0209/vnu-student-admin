(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb4effd4"],{"81f6":function(t,a,e){},"84d5":function(t,a,e){"use strict";e("81f6")},a523:function(t,a,e){"use strict";e("20f6"),e("4b85");var i=e("e8f2"),o=e("d9f7");a["a"]=Object(i["a"])("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:a,data:e,children:i}){let n;const{attrs:s}=e;return s&&(e.attrs={},n=Object.keys(s).filter(t=>{if("slot"===t)return!1;const a=s[t];return t.startsWith("data-")?(e.attrs[t]=a,!1):a||"string"===typeof a})),a.id&&(e.domProps=e.domProps||{},e.domProps.id=a.id),t(a.tag,Object(o["a"])(e,{staticClass:"container",class:Array({"container--fluid":a.fluid}).concat(n||[])}),i)}})},e58a:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.textSearch,expression:"textSearch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập tiêu đề tin tức...",autocomplete:"off"},domProps:{value:t.textSearch},on:{input:function(a){a.target.composing||(t.textSearch=a.target.value)}}})]),e("v-col",{attrs:{cols:"12",sm:"1"}},[e("button",{staticClass:"btn btn-search primary",on:{click:function(a){return a.stopPropagation(),t.getListNewsFilter.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi mdi-magnify-minus-outline")])],1)]),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticStyle:{float:"right"}},[e("button",{staticClass:"btn btn-add primary",on:{click:function(a){return a.stopPropagation(),t.showModalForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Thêm mới ")],1)])])],1),e("v-row",{staticClass:"my-0 mb-3"},[e("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[e("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listNews,"items-per-page":t.itemsPerPage,"item-key":"PrimKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.stt",fn:function(a){var i=a.index;return[e("td",[t._v(t._s(i+1))])]}},{key:"item.TinhTrang",fn:function(a){var i=a.item;a.index;return[e("td",[t._v(" "+t._s("2"===i.TinhTrang?"Hoạt động":"Đang soạn thảo")+" ")])]}},{key:"item.thaotac",fn:function(a){var i=a.item;return[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.editNews(i)}}},"v-btn",n,!1),o),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Sửa")])]),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.openDialogDeleteItem(i)}}},"v-btn",n,!1),o),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[e("span",[t._v("Xóa")])]),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.openDialogPublicDate(i)}}},"v-btn",n,!1),o),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi mdi-calendar-check")])],1)]}}],null,!0)},[e("span",[t._v("Xuất bản/Ngừng xuất bản")])]),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.handleShowNews(i)}}},"v-btn",n,!1),o),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-eye")])],1)]}}],null,!0)},[e("span",[t._v("Hiển thị bài viết")])])]}}])}),t.pageCount?e("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),t.dialogForm?e("div",[e("v-dialog",{attrs:{"max-width":"1200",persistent:"",fullscreen:""},model:{value:t.dialogForm,callback:function(a){t.dialogForm=a},expression:"dialogForm"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?e("v-toolbar-title",[t._v("Cập nhật bài viết tin tức")]):t._e(),t.edittingForm?t._e():e("v-toolbar-title",[t._v("Thêm mới bài viết tin tức")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("FormBaiVietTinTuc",{ref:"formBaiVietTinTucRef",attrs:{dataEdit:t.dataEdit},on:{emitDataAgencies:t.handleEmitDataAgencies,emitDataCategoryNews:t.handleEmitDataCategoryNews}}),e("v-card-text",{staticClass:"px-2 py-2"},[e("v-card-actions",{staticClass:"justify-center my-4"},[e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(a){return t.submitForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?e("span",[t._v("Cập nhật")]):e("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1)],1):t._e(),e("v-dialog",{attrs:{persistent:"","max-width":"286"},model:{value:t.dialogDelete,callback:function(a){t.dialogDelete=a},expression:"dialogDelete"}},[e("v-card",[e("v-toolbar",{attrs:{dark:"",color:"primary"}},[e("v-card-title",{staticClass:"text-h7 text-center"},[t._v(" Bạn có muốn xóa không? ")])],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){t.dialogDelete=!1}}},[t._v(" Từ chối ")]),e("v-btn",{attrs:{color:"primary",text:""},on:{click:t.deleteNews}},[t._v(" Xác nhận ")])],1)],1)],1),t.dialogPublicDate?e("div",[e("v-dialog",{attrs:{persistent:"","max-width":"860px"},model:{value:t.dialogPublicDate,callback:function(a){t.dialogPublicDate=a},expression:"dialogPublicDate"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[e("span",{staticClass:"text-h5"},[t._v("Ngày xuất bản")])]),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("FormPublicDate",{ref:"formPublicDateRef",attrs:{dataItem:t.dataItem}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:function(a){t.dialogPublicDate=!1}}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.handlePublicDate}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),e("span",[t._v("Xác nhận")])],1)],1)],1)],1)],1):t._e()],1)},o=[],n=(e("13d5"),e("e20e")),s=e("854a"),l=e.n(s),r=e("c1df"),c=e.n(r),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formBaiVietTinTucRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Tên bài viết: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên bài viết...",dense:"","hide-details":"auto",required:""},on:{change:t.handleChangeTitle},model:{value:t.formData.TenBaiViet,callback:function(a){t.$set(t.formData,"TenBaiViet",a)},expression:"formData.TenBaiViet"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Ảnh đại diện:")]),e("v-file-input",{attrs:{accept:"image/png, image/jpeg, image/bmp","prepend-icon":"",label:"Chọn ảnh đại diện",solo:"",dense:""},on:{change:t.handleChangeFile}}),t.formData.AnhDaiDien?e("div",{staticClass:"note italic pointer",on:{click:t.handleViewAvatar}},[t._v(" Nhấn để xem ảnh ")]):t._e()],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Đường dẫn: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên bài viết...",dense:"","hide-details":"auto",required:""},on:{change:t.handleChangeLink},model:{value:t.formData.DuongDanRutGon,callback:function(a){t.$set(t.formData,"DuongDanRutGon",a)},expression:"formData.DuongDanRutGon"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Mô tả:")]),e("v-text-field",{attrs:{solo:"",label:"Nhập mô tả...",dense:"","hide-details":"auto"},model:{value:t.formData.MoTa,callback:function(a){t.$set(t.formData,"MoTa",a)},expression:"formData.MoTa"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Nội dung:")]),e("VueEditor",{attrs:{useCustomImageHandler:""},on:{"image-added":t.imageHandler},model:{value:t.formData.NoiDungBaiViet,callback:function(a){t.$set(t.formData,"NoiDungBaiViet",a)},expression:"formData.NoiDungBaiViet"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Cơ quan, đơn vị:")]),e("v-select",{attrs:{items:t.optionAgencies,label:"Chọn",dense:"",solo:""},model:{value:t.formData.CoQuanDonVi,callback:function(a){t.$set(t.formData,"CoQuanDonVi",a)},expression:"formData.CoQuanDonVi"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Chuyên mục:")]),e("v-select",{staticClass:"custom-height-select",attrs:{items:t.optionCategoryNews,label:"Chọn",dense:"",solo:"",multiple:""},model:{value:t.formData.ChuyenMuc,callback:function(a){t.$set(t.formData,"ChuyenMuc",a)},expression:"formData.ChuyenMuc"}})],1)],1),e("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.showAvatar,callback:function(a){t.showAvatar=a},expression:"showAvatar"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3"},[e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:""},on:{click:function(a){t.showAvatar=!1}}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",[e("img",{staticClass:"style-img",attrs:{src:t.formData.AnhDaiDien,alt:""}})])])],1)],1)],1)],1)],1)],1)},u=[];const m=t=>(t=t.toLowerCase(),t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,""),t=t.replace(/[đĐ]/g,"d"),t=t.replace(/([^0-9a-z-\s])/g,""),t=t.replace(/(\s+)/g,"-"),t=t.replace(/-+/g,"-"),t=t.replace(/^-+|-+$/g,""),t);var g=e("5873"),h={props:["dataEdit"],components:{VueEditor:g["a"]},data(){var t,a;return{formData:{DuongDanRutGon:this.dataEdit.DuongDanRutGon||window.location.origin+"/#/tin-tuc/",TenBaiViet:this.dataEdit.TenBaiViet||"",AnhDaiDien:this.dataEdit.AnhDaiDien||null,NgayXuatBan:this.dataEdit.NgayXuatBan?c()(this.dataEdit.NgayXuatBan).format("DD/MM/YYYY"):"",CoQuanDonVi:(null===(t=this.dataEdit.CoQuanDonVi)||void 0===t?void 0:t.MaHanhChinh)||"",NoiDungBaiViet:this.dataEdit.NoiDungBaiViet||"",MoTa:this.dataEdit.MoTa||"",TinhTrang:this.dataEdit.TinhTrang||"1",ChuyenMuc:null!==(a=this.dataEdit.ChuyenMuc)&&void 0!==a&&a.length?this.dataEdit.ChuyenMuc.map(t=>t.MaDinhDanhChuyenMuc):[]},showAvatar:!1,idPage:window.location.origin+"/#/tin-tuc/",optionAgencies:[],optionCategoryNews:[],validForm:!1,linkImg:"",rules:{required:t=>!!t||"Không được để trống.",date:t=>{const a=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;return a.test(t)||"Định dạng ngày là: ngày/tháng/năm"},file:t=>!t||t.size<2e6||"Kich thước fle nhỏ hơn 2MB"}}},mounted(){console.log("moun")},created(){const t=this;t.getList("coquandonvi"),t.getList("chuyenmuctintuc"),console.log("cretate",this.dataEdit)},methods:{getList(t){let a=this;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},i={collectionName:t,data:e};a.$store.dispatch("collectionFilter",i).then((function(e){const i=e.content;"coquandonvi"===t?(a.$emit("emitDataAgencies",i),a.optionAgencies=i.map(t=>({text:t.tenGoi,value:t.maHanhChinh}))):(a.$emit("emitDataCategoryNews",i),a.optionCategoryNews=i.map(t=>({text:t.TenChuyenMuc,value:t.MaDinhDanh})))}))},validateForm(){let t=this;return t.$refs.formBaiVietTinTucRef.validate()},handleChangeFile(t){const a=this;if(t){let e=new FormData;e.append("file",t);const i={type:"baiviettintuc/upload",payload:e};a.$store.dispatch("uploadFile",i).then((function(t){const e=t.data.resp.fullPath;a.formData.AnhDaiDien=e,console.log("res: ",t)})).catch((function(){}))}else a.formData.AnhDaiDien=""},handleChangeTitle(t){const a=this,e=m(t);a.formData.DuongDanRutGon=a.idPage+e},handleChangeLink(t){const a=this;t||(a.formData.DuongDanRutGon=window.location.origin+"/#/tin-tuc/"),a.formData.DuongDanRutGon=t},handleViewAvatar(){const t=this;t.showAvatar=!0},imageHandler(t,a,e,i){const o=this;if(t){let n=new FormData;n.append("file",t);const s={type:"baiviettintuc/upload",payload:n};o.$store.dispatch("uploadFile",s).then((function(t){const o=t.data.resp.fullPath;a.insertEmbed(e,"image",o),i(),console.log("res: ",t)})).catch((function(){}))}}}},v=h,p=(e("84d5"),e("2877")),f=e("6544"),D=e.n(f),b=e("8336"),y=e("b0af"),C=e("99d9"),w=e("62ad"),N=e("a523"),T=e("169a"),x=e("23a7"),_=e("4bd4"),V=e("132d"),k=e("0fd9"),F=e("b974"),P=e("2fa4"),B=e("8654"),M=e("71d9"),A=e("2a7f"),E=Object(p["a"])(v,d,u,!1,null,null,null),$=E.exports;D()(E,{VBtn:b["a"],VCard:y["a"],VCardText:C["b"],VCol:w["a"],VContainer:N["a"],VDialog:T["a"],VFileInput:x["a"],VForm:_["a"],VIcon:V["a"],VRow:k["a"],VSelect:F["a"],VSpacer:P["a"],VTextField:B["a"],VToolbar:M["a"],VToolbarItems:A["a"]});var X=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formPublicDateRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Ngày xuất bản: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.birthday],solo:"",label:"Nhập ngày xuất bản...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.NgayXuatBan,callback:function(a){t.$set(t.formData,"NgayXuatBan",a)},expression:"formData.NgayXuatBan"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Ngày hết hạn: ")]),e("v-text-field",{attrs:{rules:[t.rules.birthday],solo:"",label:"Nhập ngày hết hạn...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.NgayHuyXuatBan,callback:function(a){t.$set(t.formData,"NgayHuyXuatBan",a)},expression:"formData.NgayHuyXuatBan"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Tình trạng: ")]),e("v-select",{staticClass:"custom-height-select",attrs:{items:t.optionStatus,label:"Chọn",dense:"",solo:""},model:{value:t.formData.TinhTrang,callback:function(a){t.$set(t.formData,"TinhTrang",a)},expression:"formData.TinhTrang"}})],1)],1)],1)},Y=[],I={props:["dataItem"],data(){return{formData:{NgayXuatBan:this.dataItem.NgayXuatBan?c()(this.dataItem.NgayXuatBan).format("DD/MM/YYYY"):c()(new Date).format("DD/MM/YYYY"),NgayHuyXuatBan:this.dataItem.NgayHuyXuatBan?c()(this.dataItem.NgayHuyXuatBan).format("DD/MM/YYYY"):"",TinhTrang:this.dataItem.TinhTrang||"2"},validForm:!1,optionStatus:[{text:"Hoạt động",value:"2"},{text:"Đang soạn thảo",value:"1"}],rules:{required:t=>!!t||"Không được để trống.",birthday:t=>{const a=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;return a.test(t)||"Định dạng ngày sinh là: ngày/tháng/năm"}}}},mounted(){console.log("moun")},created(){console.log("props: ",this.dataItem)},methods:{validateForm(){let t=this;return t.$refs.formPublicDateRef.validate()}}},S=I,H=Object(p["a"])(S,X,Y,!1,null,"3e98e722",null),R=H.exports;D()(H,{VCol:w["a"],VForm:_["a"],VRow:k["a"],VSelect:F["a"],VTextField:B["a"]});var K={components:{Pagination:n["a"],FormBaiVietTinTuc:$,FormPublicDate:R},data(){return{textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:15},{sortable:!1,text:"Tên bài viết",align:"left",value:"TenBaiViet",class:"th-center",width:120},{sortable:!1,text:"Tình trạng",align:"left",value:"TinhTrang",class:"th-center",width:120},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:68}],listNews:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,idNews:"",dialogDecentralization:!1,dataEditNews:[],emitDataAgencies:[],emitDataCategoryNews:[],dialogPublicDate:!1,dataItem:{}}},created(){const t=this;t.getListNews()},mounted(){console.log("select: ")},methods:{getListNewsFilter(){const t=this;console.log("tim kiếm"),t.getListNews({keyword:t.textSearch}),t.textSearch=""},getListNews(t){let a=this;a.loadingData=!0;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},i={collectionName:"baiviettintuc",data:t?{...e,...t}:e};a.$store.dispatch("collectionFilter",i).then((function(t){a.listNews=t.content,console.log("res: ",a.listNews),a.total=a.listNews.length,a.pageCount=t.totalPages,a.loadingData=!1})).catch((function(){a.loadingData=!1}))},openDialogDeleteItem(t){const a=this;console.log("id delete: ",t.PrimKey),a.dialogDelete=!0,a.idNews=t.PrimKey},deleteNews(){const t=this;t.dialogDelete=!1;const a={payload:t.idNews,type:"baiviettintuc"};t.$store.dispatch("deleteItemData",a).then((function(a){l.a.success("Xóa thành công"),t.listNews=t.listNews.reduce((function(a,e){return t.idNews!==e.PrimKey&&a.push(e),a}),[]),t.total=t.listNews.length,console.log("res dele: ",a)})).catch((function(){t.loadingData=!1}))},editNews(t){const a=this,e={...t,CoQuanDonVi:{MaHanhChinh:t.CoQuanDonVi.MaHanhChinh,TenGoi:t.CoQuanDonVi.TenGoi}};a.edittingForm=!0,console.log("item edit: ",t),a.dataEdit=e,a.dialogForm=!0},handlechangePage(t){const a=this;a.getListNews(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},handleEmitDataAgencies(t){const a=this;a.emitDataAgencies=t},handleEmitDataCategoryNews(t){const a=this;a.emitDataCategoryNews=t},openDialogPublicDate(t){const a=this;a.dialogPublicDate=!0,a.dataItem=t},handlePublicDate(){const t=this,a=t.$refs.formPublicDateRef.formData,e={...t.dataItem,...a};e.NgayXuatBan=e.NgayXuatBan?c.a.utc(e.NgayXuatBan,"DD/MM/YYYY").format():"",e.NgayHuyXuatBan=e.NgayHuyXuatBan?c.a.utc(e.NgayHuyXuatBan,"DD/MM/YYYY").format():"",console.log("dataPayload: ",e,a);const i={payload:e,type:"baiviettintuc",id:t.dataItem.PrimKey};t.$store.dispatch("editItemData",i).then((function(a){l.a.success("Cập nhật thành công"),t.dialogPublicDate=!1,t.listNews=t.listNews.reduce((function(a,i){return t.dataItem.PrimKey===i.PrimKey?[...a,{...i,...e}]:[...a,i]}),[]),t.dataEdit={},console.log("res edit: ",a,e,t.dataEdit.PrimKey,t.listNews)})).catch((function(){t.loadingData=!1,l.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))},handleShowNews(t){window.location.href=`${t.DuongDanRutGon}/${t.PrimKey}`},submitForm(){const t=this;if(t.$refs.formBaiVietTinTucRef.validateForm()){const a=t.$refs.formBaiVietTinTucRef.formData,e={...a,NgayXuatBan:a.NgayXuatBan?c.a.utc(a.NgayXuatBan,"DD/MM/YYYY").format():"",NgayHuyXuatBan:a.NgayHuyXuatBan?c.a.utc(a.NgayHuyXuatBan,"DD/MM/YYYY").format():""};if(e.CoQuanDonVi=t.emitDataAgencies.reduce((t,e)=>a.CoQuanDonVi===e.maHanhChinh?{...t,MaHanhChinh:e.maHanhChinh,TenGoi:e.tenGoi}:t,{}),e.ChuyenMuc=t.emitDataCategoryNews.reduce((t,e)=>a.ChuyenMuc.includes(e.MaDinhDanh)?[...t,{MaDinhDanhChuyenMuc:e.MaDinhDanh}]:t,[]),t.edittingForm){const a={payload:e,type:"baiviettintuc",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",a).then((function(a){l.a.success("Cập nhật thành công"),t.dialogForm=!1,t.listNews=t.listNews.reduce((function(a,i){return t.dataEdit.PrimKey===i.PrimKey?[...a,{...i,...e}]:[...a,i]}),[]),t.dataEdit={},console.log("res edit: ",a,e,t.dataEdit.PrimKey,t.listNews)})).catch((function(){t.loadingData=!1,l.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const a={payload:e,type:"baiviettintuc"};t.$store.dispatch("createItemData",a).then((function(a){if(l.a.success("Thêm mới thành công"),t.listNews.length<t.itemsPerPage){const i=[...t.listNews];i.push({...e,PrimKey:a.data.resp.PrimKey}),t.listNews=i}t.dialogForm=!1,t.total=t.listNews.length,console.log("res post: ",a)})).catch((function(){t.loadingData=!1,l.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}console.log("submit",a,e)}}}},z=K,G=e("8fea"),L=e("3a2f"),q=Object(p["a"])(z,i,o,!1,null,"3464c236",null);a["default"]=q.exports;D()(q,{VBtn:b["a"],VCard:y["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:C["c"],VCol:w["a"],VContainer:N["a"],VDataTable:G["a"],VDialog:T["a"],VIcon:V["a"],VRow:k["a"],VSpacer:P["a"],VToolbar:M["a"],VToolbarItems:A["a"],VToolbarTitle:A["b"],VTooltip:L["a"]})}}]);