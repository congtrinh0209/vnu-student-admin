(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e1a0b89"],{"0e8f":function(t,e,a){"use strict";a("20f6");var i=a("e8f2");e["a"]=Object(i["a"])("flex")},"312e":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tieuDeSearch,expression:"tieuDeSearch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập tiêu đề tin tức...",autocomplete:"off"},domProps:{value:t.tieuDeSearch},on:{input:function(e){e.target.composing||(t.tieuDeSearch=e.target.value)}}})]),a("v-col",{attrs:{cols:"12",sm:"1"}},[a("button",{staticClass:"btn btn-search",on:{click:function(e){return e.stopPropagation(),t.getDanhSachTinTuc.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi mdi-magnify-minus-outline")])],1)]),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticStyle:{float:"right"}},[a("button",{staticClass:"btn btn-add",on:{click:function(e){return e.stopPropagation(),t.showAddForm.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Thêm mới ")],1)])])],1),a("v-row",{staticClass:"my-0 mb-3"},[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.danhSachTinTuc,"items-per-page":t.itemsPerPage,"item-key":"primKey","hide-default-footer":"","no-data-text":"Không có",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.thaoTac",fn:function(e){var i=e.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.showFormDetail(i)}}},"v-btn",o,!1),n),[a("v-icon",{attrs:{size:"20"}},[t._v("mdi-arrow-right-bold-circle-outline")])],1)]}}],null,!0)},[a("span",[t._v("Chi Tiết")])]),t.isAdmin?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:" mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.showUpdateForm(i)}}},"v-btn",o,!1),n),[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[a("span",[t._v("Sửa")])]):t._e(),t.isAdmin?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.deleteItem(i)}}},"v-btn",o,!1),n),[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[t._v("Xóa")])]):t._e()]}}])}),t.pageCount?a("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":function(t){}}}):t._e()],1)],1),a("v-dialog",{attrs:{"max-width":"1200",persistent:"",fullscreen:""},model:{value:t.dialogForm,callback:function(e){t.dialogForm=e},expression:"dialogForm"}},[a("v-card",[a("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.readonlyForm&&null===t.edittingForm?a("v-toolbar-title",[t._v("Thông tin tin tức")]):t._e(),!0!==t.edittingForm||t.readonlyForm?t._e():a("v-toolbar-title",[t._v("Cập nhật tin tức")]),!1!==t.edittingForm||t.readonlyForm?t._e():a("v-toolbar-title",[t._v("Thêm mới tin tức")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:t.exitForm}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("form-tin-tuc",{ref:"formTinTucRef",attrs:{editingContent:t.editContent,dataInput:t.dataInput,readonly:t.readonlyForm}}),a("v-card-text",{staticClass:"px-2 py-2"},[a("v-card-actions",{staticClass:"justify-center my-4"},[a("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.exitForm}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():a("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.submitForm.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?a("span",[t._v("Cập nhật")]):a("span",[t._v("Thêm vào")])],1)],1)],1)],1)],1)],1)},n=[],o=a("e20e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"formTinTuc",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Tiêu đề: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])])]),a("v-col",{attrs:{cols:"12",sm:"10"}},[a("v-text-field",{staticClass:"flex input-form",attrs:{solo:"",label:"Nhập tiêu đề...",dense:"","hide-details":"auto",required:"",rules:t.rules.text},model:{value:t.formData.tieuDe,callback:function(e){t.$set(t.formData,"tieuDe",e)},expression:"formData.tieuDe"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Nội dung: ")])]),a("v-col",{attrs:{cols:"12",sm:"10"}},[a("vue-editer",{attrs:{height:300},model:{value:t.formData.noiDung,callback:function(e){t.$set(t.formData,"noiDung",e)},expression:"formData.noiDung"}})],1)],1),a("v-row",{staticStyle:{display:"-webkit-box"}},[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Chuyên mục: ")])]),a("v-col",{staticStyle:{display:"table"},attrs:{cols:"12",sm:"4"}},[a("v-autocomplete",{staticClass:"flex input-form",attrs:{"hide-no-data":"",items:t.chuyenMucItems,"item-text":"name","item-value":"value",placeholder:"Chọn loại chuyên mục",dense:"",solo:"","hide-details":"auto","return-object":"",clearable:""},model:{value:t.formData.chuyenMuc,callback:function(e){t.$set(t.formData,"chuyenMuc",e)},expression:"formData.chuyenMuc"}})],1),a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Ngày xuất bản: ")])]),a("v-col",{staticStyle:{display:"table","margin-top":"-18px"},attrs:{cols:"12",sm:"4"}},[a("v-flex",{attrs:{xs6:""}},[a("v-menu",{ref:"menuDate",attrs:{"close-on-content-click":!0,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{placeholder:"dd/mm/yyyy HH:mm","prepend-icon":"mdi-calendar"},model:{value:t.formData.ngayXuatBan,callback:function(e){t.$set(t.formData,"ngayXuatBan",e)},expression:"formData.ngayXuatBan"}},"v-text-field",n,!1),i))]}}]),model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}})],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Ảnh đại diện: ")])]),a("v-col",{attrs:{cols:"12",sm:"10"}},[a("v-file-input",{attrs:{chips:"","show-size":"",label:"Tải ảnh đại diện","small-chips":"","truncate-length":"25"},model:{value:t.formData.anhDaiDien,callback:function(e){t.$set(t.formData,"anhDaiDien",e)},expression:"formData.anhDaiDien"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Tải file: ")])]),a("v-col",{attrs:{cols:"12",sm:"10"}},[a("v-file-input",{attrs:{chips:"","show-size":"",label:"Tải tài liệu","small-chips":"","truncate-length":"25",multiple:""},model:{value:t.formData.taiFile,callback:function(e){t.$set(t.formData,"taiFile",e)},expression:"formData.taiFile"}}),a("div",{staticClass:"note italic"},[t._v(" Chỉ nhận file jpg, jpeg, png, pdf, doc, docx, xls, xlsx, rar, zip, pptx, ppt ")])],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"2"}},[a("div",{staticClass:"titleText"},[t._v("Trạng thái: ")])]),a("v-col",{staticStyle:{"margin-top":"-16px"},attrs:{cols:"12",sm:"10"}},[a("v-row",[a("v-switch",{attrs:{label:t.trangThaiLabel,flat:""},on:{change:function(e){return t.setTinhTrang()}},model:{value:t.formData.trangThaiValue,callback:function(e){t.$set(t.formData,"trangThaiValue",e)},expression:"formData.trangThaiValue"}})],1)],1)],1)],1)},l=[],r=a("5873"),c={props:["editingContent","dataInput","readonly"],components:{Pagination:o["a"],"vue-editer":r["a"]},data(){return{itemsPerPage:10,pageCount:1,page:0,dialogTinTuc:!1,editTinTuc:!1,dateTime:new Date,switchTinhTrang:!1,textTinhTrang:"",required:[t=>""!==t&&null!==t&&void 0!==t||"Đây là trường bắt buộc nhập"],rules:{text:[t=>(t||"").length>0||"Đây là trường bắt buộc nhập"]},validForm:!1,activePicker:null,date:null,menuDate:!1,formData:{},trangThai:!1,dataOutput:"",chuyenMuc:"",chuyenMucItems:[{name:"Trung tâm hỗ trợ sinh viên",value:1},{name:"Thông tin nội trú",value:2},{name:"Cẩm nang Hòa Lạc",value:3},{name:"Chuyên mục 1",value:4},{name:"Chuyên mục 2",value:5},{name:"Chuyên mục 3",value:6},{name:"Tin tức chung",value:7}],trangThaiLabel:""}},created(){},watch:{},methods:{initForm(t){let e=this;"update"===t&&e.dataInput&&(e.formData=e.dataInput,e.setTinhTrang(),e.$refs.formTinTuc.resetValidation())},resetForm(){let t=this;t.formData.noiDung="",t.$refs.formTinTuc.reset(),t.$refs.formTinTuc.resetValidation()},validateForm(){let t=this;return t.$refs.formTinTuc.validate()},submitForm(){let t=this;null===t.formData.trangThaiValue&&(t.formData.trangThaiValue=!1);let e=Object.assign({},t.formData);t.$store.commit("SET_FORM_DATA",e)},setTinhTrang(){let t=this;setTimeout((function(){1==t.formData.trangThaiValue?(t.formData.trangThaiName="Hoạt động",t.trangThaiLabel="Kích hoạt"):(t.formData.trangThaiName="Không hoạt động",t.trangThaiLabel="Không kích hoạt")}),200)}}},u=c,h=a("2877"),d=a("6544"),m=a.n(d),p=a("c6a6"),v=a("62ad"),g=a("23a7"),f=a("0e8f"),T=a("4bd4"),b=a("e449"),y=a("0fd9"),C=(a("ec29"),a("9d01"),a("fe09")),D=a("c37a"),x=a("c3f0"),F=a("0789"),_=a("490a"),w=a("80d2"),S=C["a"].extend({name:"v-switch",directives:{Touch:x["a"]},props:{inset:Boolean,loading:{type:[Boolean,String],default:!1},flat:{type:Boolean,default:!1}},computed:{classes(){return{...D["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--switch":!0,"v-input--switch--flat":this.flat,"v-input--switch--inset":this.inset}},attrs(){return{"aria-checked":String(this.isActive),"aria-disabled":String(this.isDisabled),role:"switch"}},validationState(){return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0},switchData(){return this.setTextColor(this.loading?void 0:this.validationState,{class:this.themeClasses})}},methods:{genDefaultSlot(){return[this.genSwitch(),this.genLabel()]},genSwitch(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.genInput("checkbox",{...this.attrs,...e}),this.genRipple(this.setTextColor(this.validationState,{directives:[{name:"touch",value:{left:this.onSwipeLeft,right:this.onSwipeRight}}]})),this.$createElement("div",{staticClass:"v-input--switch__track",...this.switchData}),this.$createElement("div",{staticClass:"v-input--switch__thumb",...this.switchData},[this.genProgress()])])},genProgress(){return this.$createElement(F["c"],{},[!1===this.loading?null:this.$slots.progress||this.$createElement(_["a"],{props:{color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,size:16,width:2,indeterminate:!0}})])},onSwipeLeft(){this.isActive&&this.onChange()},onSwipeRight(){this.isActive||this.onChange()},onKeydown(t){(t.keyCode===w["z"].left&&this.isActive||t.keyCode===w["z"].right&&!this.isActive)&&this.onChange()}}}),V=a("8654"),k=Object(h["a"])(u,s,l,!1,null,null,null),A=k.exports;m()(k,{VAutocomplete:p["a"],VCol:v["a"],VFileInput:g["a"],VFlex:f["a"],VForm:T["a"],VMenu:b["a"],VRow:y["a"],VSwitch:S,VTextField:V["a"]});a("bc3a");var $=a("854a"),I=a.n($);I.a.options={closeButton:!0,timeOut:"5000",positionClass:"toast-top-center"};var O={components:{Pagination:o["a"],"form-tin-tuc":A},data(){return{headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:15},{sortable:!1,text:"Chuyên mục",align:"left",value:"chuyenMuc.name",class:"th-center",width:120},{sortable:!1,text:"Tiêu đề",align:"left",value:"tieuDe",class:"th-center"},{sortable:!1,text:"Trạng thái",align:"center",value:"trangThaiName",class:"th-center",width:130},{sortable:!1,text:"Thao tác",align:"center",value:"thaoTac",class:"th-center",width:150}],danhSachTinTuc:[],itemsPerPage:10,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,editContent:"",dataInput:"",total:1,tieuDeSearch:""}},created(){let t=this;t.getDanhSachTinTuc(),t.isAdmin||t.checkRole("XEMBAOCAODONVI")||t.checkRole("XEMTATCABAOCAO")||t.$router.push({path:"/login"})},watch:{},computed:{},methods:{showUpdateForm(t){let e=this;e.readonlyForm=!1,e.editContent=t;try{e.dataInput=Object.assign({},t)}catch(a){e.dataInput={}}e.dialogForm=!0,e.edittingForm=!0,setTimeout((function(){e.$refs.formTinTucRef.initForm("update")}),200)},showAddForm(){let t=this;t.dialogForm=!0,t.edittingForm=!1,t.readonlyForm=!1,setTimeout((function(){t.$refs.formTinTucRef.resetForm()}),200)},showFormDetail(t){let e=this;e.dialogForm=!0,e.edittingForm=null,e.readonlyForm=!0,e.dataInput=Object.assign({},t),setTimeout((function(){e.$refs.formTinTucRef.initForm("update")}),200)},submitForm(){let t=this;if(t.$refs.formTinTucRef.validateForm()){t.$refs.formTinTucRef.submitForm();let e=t.$store.getters.getFormData;if(t.loadingAction=!0,t.edittingForm){let a=t.danhSachTinTuc.filter(e=>e.id!==t.editContent.id);a.push(e),t.danhSachTinTuc=a,t.loadingAction=!1,t.dialogForm=!1,I.a.remove(),I.a.success("Cập nhật thành công")}else e.id=t.getMaxNumber("id"),e.stt=t.getMaxNumber("stt"),t.danhSachTinTuc.push(e),t.loadingAction=!1,t.dialogForm=!1,t.total+=1,I.a.remove(),I.a.success("Thêm mới thành công")}},exitForm(){let t=this;t.dialogForm=!1,t.$refs.formTinTucRef.resetForm()},deleteItem(t){let e=this;e.$store.commit("SET_SHOWCONFIRM",!0);let a={auth:!1,title:"Xoá loại bản đồ",message:"Bạn có chắc xóa loại bản đồ này?",button:{yes:"Có",no:"Không"},callback:()=>{e.loading=!0,e.danhSachTinTuc=e.danhSachTinTuc.filter(e=>e.id!==t.id),e.loading=!1,e.total-=1,I.a.remove(),I.a.success("Xóa loại bản đồ thành công")}};e.$store.commit("SET_CONFIG_CONFIRM_DIALOG",a)},getDanhSachTinTuc(){let t=this;t.loadingData=!0;let e={collectionName:"canbo",data:{tieuDe:""!==t.tieuDeSearch?t.tieuDeSearch:null}};t.$store.dispatch("collectionFilter",e).then((function(e){t.danhSachTinTuc=e,t.total=t.danhSachTinTuc.length,t.loadingData=!1})).catch((function(){t.loadingData=!1}))},getMaxNumber(t){let e=this,a=0;return a=Math.max(...e.danhSachTinTuc.map(e=>e[t])),a+1}}},M=O,P=a("8336"),R=a("b0af"),B=a("99d9"),N=a("8fea"),z=a("169a"),E=a("132d"),j=a("2fa4"),L=a("71d9"),K=a("2a7f"),X=a("3a2f"),H=Object(h["a"])(M,i,n,!1,null,null,null);e["default"]=H.exports;m()(H,{VBtn:P["a"],VCard:R["a"],VCardActions:B["a"],VCardText:B["b"],VCol:v["a"],VDataTable:N["a"],VDialog:z["a"],VIcon:E["a"],VRow:y["a"],VSpacer:j["a"],VToolbar:L["a"],VToolbarItems:K["a"],VToolbarTitle:K["b"],VTooltip:X["a"]})},"9d01":function(t,e,a){},ec29:function(t,e,a){},fe09:function(t,e,a){"use strict";var i=a("c37a"),n=a("5607"),o=a("2b0e"),s=o["a"].extend({name:"rippleable",directives:{ripple:n["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),l=a("8547"),r=a("58df");function c(t){t.preventDefault()}e["a"]=Object(r["a"])(i["a"],s,l["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=i["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:c},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onBlur(){this.isFocused=!1},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const a=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===a&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}})}}]);