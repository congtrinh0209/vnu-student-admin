(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fc78"],{b4a1:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{attrs:{"no-gutters":""}},[a("v-col",{attrs:{cols:"12",sm:"5"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.textSearch,expression:"textSearch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Nhập tiêu đề tin tức...",autocomplete:"off"},domProps:{value:t.textSearch},on:{input:function(e){e.target.composing||(t.textSearch=e.target.value)}}})]),a("v-col",{attrs:{cols:"12",sm:"1"}},[a("button",{staticClass:"btn btn-search primary",on:{click:function(e){return e.stopPropagation(),t.getListRightsGroupFilter.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi mdi-magnify-minus-outline")])],1)]),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("div",{staticStyle:{float:"right"}},[a("button",{staticClass:"btn btn-add primary",on:{click:function(e){return e.stopPropagation(),t.showModalForm.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Thêm mới ")],1)])])],1),a("v-row",{staticClass:"my-0 mb-3"},[a("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[a("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listRightsGroup,"items-per-page":t.itemsPerPage,"item-key":"primKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.stt",fn:function(e){var o=e.index;return[a("td",[t._v(t._s(o+1))])]}},{key:"item.thaotac",fn:function(e){var o=e.item;return[t.isAdmin?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.editGroup(o)}}},"v-btn",i,!1),n),[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[a("span",[t._v("Sửa")])]):t._e(),t.isAdmin?a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(e){return e.stopPropagation(),t.openDialogDeleteItem(o)}}},"v-btn",i,!1),n),[a("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[a("span",[t._v("Xóa")])]):t._e()]}}])}),t.pageCount?a("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),t.dialogForm?a("div",[a("v-dialog",{attrs:{"max-width":"800px",persistent:""},model:{value:t.dialogForm,callback:function(e){t.dialogForm=e},expression:"dialogForm"}},[a("v-card",[a("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?a("v-toolbar-title",[t._v("Cập nhật nhóm quyền")]):t._e(),t.edittingForm?t._e():a("v-toolbar-title",[t._v("Thêm mới nhóm quyền")]),a("v-spacer"),a("v-toolbar-items",[a("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[a("v-icon",[t._v("mdi-close")])],1)],1)],1),a("FormNhomQuyen",{ref:"formNhomQuyenRef",attrs:{dataEdit:t.dataEdit},on:{emitDataUses:t.emitDataListUses}}),a("v-card-text",{staticClass:"px-2 py-2"},[a("v-card-actions",{staticClass:"justify-center my-4"},[a("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[a("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():a("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.submitForm.apply(null,arguments)}}},[a("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?a("span",[t._v("Cập nhật")]):a("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1)],1):t._e(),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v(" Bạn có muốn xóa không? ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialogDelete=!1}}},[t._v(" Từ chối ")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.deleteGroup}},[t._v(" Xác nhận ")])],1)],1)],1)],1)},n=[],i=(a("13d5"),a("e20e")),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-form",{ref:"formPhanQuyenCanBoRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Tên nhóm Quyền: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-text-field",{attrs:{rules:[t.rules.required],solo:"",disabled:!!t.dataEdit.MaSoCanBo,label:"Nhập tên nhóm quyền...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TenNhomQuyen,callback:function(e){t.$set(t.formData,"TenNhomQuyen",e)},expression:"formData.TenNhomQuyen"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Chức năng: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-select",{attrs:{items:t.listUses,chips:"",label:"Chọn nhóm quyền",multiple:"",solo:""},model:{value:t.formData.ChucNang,callback:function(e){t.$set(t.formData,"ChucNang",e)},expression:"formData.ChucNang"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12"}},[a("div",{staticClass:"titleText mb-2"},[t._v(" Tình trạng: "),a("span",{staticStyle:{color:"red"}},[t._v("*")])]),a("v-select",{attrs:{items:t.optionStatus,label:"Chọn",dense:"",solo:""},model:{value:t.formData.TinhTrang,callback:function(e){t.$set(t.formData,"TinhTrang",e)},expression:"formData.TinhTrang"}})],1)],1)],1)},r=[],l={props:["dataEdit"],data(){return{formData:{TenNhomQuyen:this.dataEdit.TenNhomQuyen||"",TinhTrang:this.dataEdit.TinhTrang||"2",ChucNang:this.dataEdit.ChucNang||[]},listUses:[],validForm:!1,optionStatus:[{text:"Hoạt động",value:"2"},{text:"Không hoạt động",value:"1"}],rules:{required:t=>!!t||"Không được để trống."}}},mounted(){console.log("moun")},created(){const t=this;t.getUeses(),console.log("cretate",this.dataEdit)},computed:{},methods:{validateForm(){let t=this;return t.$refs.formPhanQuyenCanBoRef.validate()},getUeses(){let t=this;const e={page:0,size:100,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"1",thamChieu_maMuc:""},a={collectionName:"vaitrosudung",data:e};t.$store.dispatch("collectionFilter",a).then((function(e){const a=e.content;t.$emit("emitDataUses",a),t.listUses=a.map(t=>({text:t.tenMuc,value:t.maMuc}))}))}}},c=l,d=a("2877"),u=a("6544"),m=a.n(u),h=a("62ad"),g=a("4bd4"),p=a("0fd9"),v=a("b974"),f=a("8654"),y=Object(d["a"])(c,s,r,!1,null,"71043c80",null),b=y.exports;m()(y,{VCol:h["a"],VForm:g["a"],VRow:p["a"],VSelect:v["a"],VTextField:f["a"]});var C=a("854a"),x=a.n(C),_={components:{Pagination:i["a"],FormNhomQuyen:b},data(){return{textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:15},{sortable:!1,text:"Tên nhóm quyền",align:"left",value:"TenNhomQuyen",class:"th-center",width:120},{sortable:!1,text:"Chức năng",align:"left",value:"tenChucNang",class:"th-center",width:120},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:68}],listRightsGroup:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,idGroup:"",emitDataGetListUses:[],responseListGroup:[]}},created(){const t=this;t.getListRightsGroup()},mounted(){},methods:{getListRightsGroupFilter(){const t=this;console.log("tim kiếm"),t.getListRightsGroup({TenNhomQuyen:t.textSearch}),t.textSearch=""},getListRightsGroup(t){let e=this;e.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},o={collectionName:"nhomquyen",data:t?{...a,...t}:a};e.$store.dispatch("collectionFilter",o).then((function(t){const a=t.content;e.responseListGroup=a,e.listRightsGroup=a.map(t=>({...t,tenChucNang:t.ChucNang.map(t=>t.TenMuc).join(", ")})),console.log("res group: ",e.listRightsGroup),e.total=e.listRightsGroup.length,e.pageCount=t.totalPages,e.loadingData=!1})).catch((function(){e.loadingData=!1}))},openDialogDeleteItem(t){const e=this;console.log("id delete: ",t.PrimKey),e.dialogDelete=!0,e.idGroup=t.PrimKey},deleteGroup(){const t=this;t.dialogDelete=!1;const e={payload:t.idGroup,type:"nhomquyen"};t.$store.dispatch("deleteItemData",e).then((function(e){x.a.success("Xóa thành công"),t.listRightsGroup=t.listRightsGroup.reduce((function(e,a){return t.idGroup!==a.PrimKey&&e.push(a),e}),[]),console.log("res dele: ",e)})).catch((function(){t.loadingData=!1}))},editGroup(t){const e=this;e.edittingForm=!0;const a=e.responseListGroup.filter(e=>e.PrimKey===t.PrimKey);console.log("item: ",a),e.dataEdit={...t,ChucNang:a[0].ChucNang.map(t=>t.MaMuc)},console.log("item edit: ",t,a[0].ChucNang.map(t=>t.MaMuc),e.dataEdit),e.dialogForm=!0},handlechangePage(t){const e=this;e.getListRightsGroup(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},emitDataListUses(t){const e=this;e.emitDataGetListUses=t},submitForm(){const t=this;if(t.$refs.formNhomQuyenRef.validateForm()){const e=t.$refs.formNhomQuyenRef.formData;let a=[];if(t.emitDataGetListUses.forEach(t=>{e.ChucNang.forEach(e=>{e===t.maMuc&&a.push({MaMuc:t.maMuc,TenMuc:t.tenMuc})})}),e.ChucNang=a,t.edittingForm){const a={payload:e,type:"nhomquyen",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",a).then((function(e){x.a.success("Cập nhật thành công"),t.dialogForm=!1,t.getListRightsGroup(),console.log("res edit: ",e,t.dataEdit.PrimKey),t.dataEdit={}})).catch((function(){t.loadingData=!1,x.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const a={payload:e,type:"nhomquyen"};t.$store.dispatch("createItemData",a).then((function(e){x.a.success("Thêm mới thành công"),t.getListRightsGroup(),t.dialogForm=!1,console.log("res post: ",e)})).catch((function(){t.loadingData=!1,x.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}console.log("submit",e)}}}},T=_,D=a("8336"),F=a("b0af"),k=a("99d9"),N=a("8fea"),G=a("169a"),w=a("132d"),P=a("2fa4"),R=a("71d9"),V=a("2a7f"),M=a("3a2f"),S=Object(d["a"])(T,o,n,!1,null,"1ab68556",null);e["default"]=S.exports;m()(S,{VBtn:D["a"],VCard:F["a"],VCardActions:k["a"],VCardText:k["b"],VCardTitle:k["c"],VCol:h["a"],VDataTable:N["a"],VDialog:G["a"],VIcon:w["a"],VRow:p["a"],VSpacer:P["a"],VToolbar:R["a"],VToolbarItems:V["a"],VToolbarTitle:V["b"],VTooltip:M["a"]})}}]);