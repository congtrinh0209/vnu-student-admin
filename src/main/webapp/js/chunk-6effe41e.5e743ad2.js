(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6effe41e"],{"0e0b":function(t,a,e){"use strict";e("2f6d")},"2f6d":function(t,a,e){},3168:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));const o={PHAN_QUYEN_CAN_BO:["ALL_CANBO_PHANQUYEN","CANBO_PHANQUYEN"],XEM_CAN_BO_ALL:["ALL_CANBO_XEM"],XEM_CAN_BO_DV:["CANBO_XEM"],THEM_MOI_CAN_BO_ALL:["ALL_CANBO_CAPNHAT"],THEM_MOI_CAN_BO_DV:["CANBO_CAPNHAT"],XEM_SINH_VIEN_ALL:["ALL_SINHVIEN_XEM"],XEM_SINH_VIEN_DV:["SINHVIEN_XEM"],THEM_MOI_SINH_VIEN_ALL:["ALL_SINHVIEN_CAPNHAT"],THEM_MOI_SINH_VIEN_DV:["SINHVIEN_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_ALL:["ALL_ALBUM_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_DV:["ALBUM_CAPNHAT"],CAP_NHAT_TIN_BAI_ALL:["ALL_TINBAI_CAPNHAT"],CAP_NHAT_TIN_BAI_DV:["TINBAI_CAPNHAT"],XEM_TIN_BAI_ALL:["ALL_TINBAI_XEM"],XEM_TIN_BAI_DV:["TINBAI_XEM"],DUYET_TIN_BAI:["TINBAI_DUYET"],HUY_XUAT_BAN_TIN_BAI:["TINBAI_HUY_XUATBAN"],XUAT_BAN_TIN_BAI:["TINBAI_XUATBAN"]}},4624:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var o=e("66e5");const i={name:"useAccountAuthorization",data(){return{}},mounted(){},methods:{handleCheckActionAuthor(t){const a=this,e=a.$cookies.get("UserInfo","").vaiTroSuDung.split(",");for(const o of e)if(t.includes(o))return!0;return!1},handleCheckAuthor(t,a){const e=this;let i="";const n=e.$cookies.get("UserInfo","").vaiTroSuDung.split(",");for(const s of n){if(t.includes(s)){i=o["a"].ALL;break}a.includes(s)&&(i=o["a"].ALONE)}return i}}}},"66e5":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));const o={ALL:"ALL",ALONE:"ALONE"}},a398:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.textSearch,expression:"textSearch"}],staticClass:"form-control",staticStyle:{outline:"none"},attrs:{type:"text",placeholder:"Nhập tiêu đề tin tức...",autocomplete:"off"},domProps:{value:t.textSearch},on:{input:function(a){a.target.composing||(t.textSearch=a.target.value)}}})]),e("v-col",{attrs:{cols:"12",sm:"1"}},[e("button",{staticClass:"btn btn-search primary",on:{click:function(a){return a.stopPropagation(),t.getListMapFilter.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi mdi-magnify-minus-outline")])],1)]),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticStyle:{float:"right"}},[e("button",{staticClass:"btn btn-add primary",on:{click:function(a){return a.stopPropagation(),t.showModalForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Thêm mới ")],1)]),t.checkActionAuthor?e("div",{staticStyle:{float:"right"}},[e("button",{staticClass:"btn btn-add primary",on:{click:function(a){return a.stopPropagation(),t.openDialogDecentralization.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Phân quyền ")],1)]):t._e()])],1),e("v-row",{staticClass:"my-0 mb-3"},[e("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[e("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listMap,"items-per-page":t.itemsPerPage,"item-key":"PrimKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.chon",fn:function(t){t.index}},{key:"item.stt",fn:function(a){var o=a.index;return[e("td",[t._v(t._s(o+1))])]}},{key:"item.thaotac",fn:function(a){var o=a.item;return[e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.editMap(o)}}},"v-btn",n,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Sửa")])])]}}]),model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}}),t.pageCount?e("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),t.dialogForm?e("div",[e("v-dialog",{attrs:{"max-width":"1000",persistent:""},model:{value:t.dialogForm,callback:function(a){t.dialogForm=a},expression:"dialogForm"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?e("v-toolbar-title",[t._v("Cập nhật bản đồ")]):t._e(),t.edittingForm?t._e():e("v-toolbar-title",[t._v("Thêm mới bản đồ")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("FormBanDo",{ref:"formBanDoRef",attrs:{unitId:t.unitId,checkActionAuthor:t.checkActionAuthor,dataEdit:t.dataEdit},on:{emitDataArea:t.handleEmitDataArea}}),e("v-card-text",{staticClass:"px-2 py-2"},[e("v-card-actions",{staticClass:"justify-center my-4"},[e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(a){return t.submitForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?e("span",[t._v("Cập nhật")]):e("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1)],1):t._e()],1)},i=[],n=e("e20e"),s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formBanDoRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Tên địa điểm: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên đầy đủ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TenDiaDiem,callback:function(a){t.$set(t.formData,"TenDiaDiem",a)},expression:"formData.TenDiaDiem"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Tọa độ:")]),e("v-text-field",{attrs:{solo:"",label:"Nhập tọa độ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.ToaDo,callback:function(a){t.$set(t.formData,"ToaDo",a)},expression:"formData.ToaDo"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Loại bản đồ:")]),e("v-select",{attrs:{items:[],label:"Chọn",dense:"",solo:""},model:{value:t.formData.LoaiBanDo,callback:function(a){t.$set(t.formData,"LoaiBanDo",a)},expression:"formData.LoaiBanDo"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Khu vực:")]),e("v-select",{attrs:{items:t.listArea,label:"Chọn",dense:"",solo:""},model:{value:t.formData.KhuVuc,callback:function(a){t.$set(t.formData,"KhuVuc",a)},expression:"formData.KhuVuc"}})],1)],1)],1)},l=[],r=e("66e5"),c=e("3168"),d=e("4624"),u={props:["dataEdit","unitId","emitDataArea"],mixins:[d["a"]],data(){return{formData:{TenDiaDiem:"",LoaiBanDo:"",ToaDo:"",KhuVuc:""},validForm:!1,listArea:[],rules:{required:t=>!!t||"Không được để trống.",email:t=>{const a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(t)||"Đây không phải là email"},birthday:t=>{const a=/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;return a.test(t)||"Định dạng ngày sinh là: ngày/tháng/năm"},phone:t=>{const a=/^(0?)(3[2-9]|5[6|8|9]|7[0|6-9]|8[0-6|8|9]|9[0-4|6-9])[0-9]{7}$/;let e;return e=""===t||(a.test(t)||"Sai định dạng số điện thoại"),e},idCard:t=>{const a=/^[0-9]{9,12}$/;return a.test(t)||"Định dạng sai số CCCD"}}}},mounted(){console.log("moun")},created(){var t;const a=this;a.dataEdit&&null!==(t=a.dataEdit.MainImage)&&void 0!==t&&t.FileUrl&&(a.checkFile=!0),a.checkActionUpload=a.handleCheckAuthor(c["a"].CAP_NHAT_ANH_CHO_SV_ALL,c["a"].CAP_NHAT_ANH_CHO_SV_DV),a.checkActionUpload===r["a"].ALONE&&a.unitId!==a.dataEdit.CoQuanDonVi.MaHanhChinh&&(a.checkActionUpload=""),a.getListArea(),console.log("cretate",this.dataEdit,a.unitId,a.checkActionUpload)},computed:{},methods:{validateForm(){let t=this;return t.$refs.formBanDoRef.validate()},getListArea(){let t=this;t.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},e={collectionName:"khuvuc",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){t.$emit("emitDataArea",a.content),t.listArea=a.content.map(t=>({text:t.TenKhuVuc,value:t.PrimKey})),console.log("res: ",t.listArea)})).catch((function(){t.loadingData=!1}))}}},m=u,_=(e("0e0b"),e("2877")),h=e("6544"),A=e.n(h),p=e("62ad"),v=e("4bd4"),f=e("0fd9"),g=e("b974"),N=e("8654"),T=Object(_["a"])(m,s,l,!1,null,null,null),D=T.exports;A()(T,{VCol:p["a"],VForm:v["a"],VRow:f["a"],VSelect:g["a"],VTextField:N["a"]});e("854a");var C={components:{Pagination:n["a"],FormBanDo:D},data(){return{selected:[],textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:15},{sortable:!1,text:"Tên địa điểm",align:"left",value:"TenDiaDiem",class:"th-center",width:120},{sortable:!1,text:"Khu vực",align:"left",value:"KhuVuc.TenKhuVuc",class:"th-center",width:120},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:68}],listMap:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,dialogDecentralization:!1,dataEditCadres:[],emitDataArea:[],checkActionAuthor:!1,unitId:"",checkActionAddAndUpdate:""}},created(){const t=this;t.getListMap()},mounted(){console.log("select: ",this.selected)},methods:{getListMapFilter(){const t=this;console.log("tim kiếm"),t.getListMap({keyword:t.textSearch}),t.textSearch=""},getListMap(t){let a=this;a.loadingData=!0;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},o={collectionName:"bandoso",data:t?{...e,...t}:e};a.$store.dispatch("collectionFilter",o).then((function(t){a.listMap=t.content.map(t=>({...t})),console.log("res: ",a.listMap),a.total=a.listMap.length,a.pageCount=t.totalPages,a.loadingData=!1})).catch((function(){a.loadingData=!1}))},editMap(t){const a=this;a.edittingForm=!0,console.log("item edit: ",t),a.dialogForm=!0},handlechangePage(t){const a=this;a.getListMap(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},handleEmitDataArea(t){const a=this;a.emitDataArea=t},submitForm(){const t=this;if(t.$refs.formBanDoRef.validateForm()){const a=t.$refs.formBanDoRef.formData;console.log("submit",a,t.emitDataArea)}}}},b=C,I=e("8336"),L=e("b0af"),k=e("99d9"),E=e("8fea"),V=e("169a"),M=e("132d"),x=e("2fa4"),B=e("71d9"),y=e("2a7f"),F=e("3a2f"),H=Object(_["a"])(b,o,i,!1,null,"8bf6d60e",null);a["default"]=H.exports;A()(H,{VBtn:I["a"],VCard:L["a"],VCardActions:k["a"],VCardText:k["b"],VCol:p["a"],VDataTable:E["a"],VDialog:V["a"],VIcon:M["a"],VRow:f["a"],VSpacer:x["a"],VToolbar:B["a"],VToolbarItems:y["a"],VToolbarTitle:y["b"],VTooltip:F["a"]})}}]);