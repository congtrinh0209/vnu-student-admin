(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b287026"],{3168:function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));const o={PHAN_QUYEN_CAN_BO:["ALL_CANBO_PHANQUYEN","CANBO_PHANQUYEN"],XEM_CAN_BO_ALL:["ALL_CANBO_XEM"],XEM_CAN_BO_DV:["CANBO_XEM"],THEM_MOI_CAN_BO_ALL:["ALL_CANBO_CAPNHAT"],THEM_MOI_CAN_BO_DV:["CANBO_CAPNHAT"],XEM_SINH_VIEN_ALL:["ALL_SINHVIEN_XEM"],XEM_SINH_VIEN_DV:["SINHVIEN_XEM"],THEM_MOI_SINH_VIEN_ALL:["ALL_SINHVIEN_CAPNHAT"],THEM_MOI_SINH_VIEN_DV:["SINHVIEN_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_ALL:["ALL_ALBUM_CAPNHAT"],CAP_NHAT_ANH_CHO_SV_DV:["ALBUM_CAPNHAT"],CAP_NHAT_TIN_BAI_ALL:["ALL_TINBAI_CAPNHAT"],CAP_NHAT_TIN_BAI_DV:["TINBAI_CAPNHAT"],XEM_TIN_BAI_ALL:["ALL_TINBAI_XEM"],XEM_TIN_BAI_DV:["TINBAI_XEM"],DUYET_TIN_BAI:["TINBAI_DUYET"],HUY_XUAT_BAN_TIN_BAI:["TINBAI_HUY_XUATBAN"],XUAT_BAN_TIN_BAI:["TINBAI_XUATBAN"],CAP_NHAT_VA_THEM_BAN_DO:["BANDO_CAPNHAT"],XOA_BAN_DO:["BANDO_XOA"],CAP_NHAT_VA_THEM_LOAI_BAN_DO:["LOAI_BANDO_CAPNHAT"],XOA_LOAI_BAN_DO:["LOAI_BANDO_XOA"]}},4624:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var o=e("66e5");const i={name:"useAccountAuthorization",data(){return{}},mounted(){},methods:{handleCheckActionAuthor(t){const a=this,e=a.$cookies.get("UserInfo","").vaiTroSuDung.split(",");for(const o of e)if(t.includes(o))return!0;return!1},handleCheckAuthor(t,a){const e=this;let i="";const n=e.$cookies.get("UserInfo","").vaiTroSuDung.split(",");for(const s of n){if(t.includes(s)){i=o["a"].ALL;break}a.includes(s)&&(i=o["a"].ALONE)}return i}}}},"66e5":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));const o={ALL:"ALL",ALONE:"ALONE"}},a398:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12",sm:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.textSearch,expression:"textSearch"}],staticClass:"form-control",staticStyle:{outline:"none"},attrs:{type:"text",placeholder:"Nhập tiêu đề tin tức...",autocomplete:"off"},domProps:{value:t.textSearch},on:{input:function(a){a.target.composing||(t.textSearch=a.target.value)}}})]),e("v-col",{attrs:{cols:"12",sm:"1"}},[e("button",{staticClass:"btn btn-search primary",on:{click:function(a){return a.stopPropagation(),t.getListMapFilter.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi mdi-magnify-minus-outline")])],1)]),t.checkActionAddAndUpdate?e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticStyle:{float:"right"}},[e("button",{staticClass:"btn btn-add primary",on:{click:function(a){return a.stopPropagation(),t.showModalForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"22"}},[t._v("mdi-file-plus")]),t._v(" Thêm mới ")],1)])]):t._e()],1),e("v-row",{staticClass:"my-0 mb-3"},[e("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[e("v-data-table",{staticClass:"table-base mt-2",attrs:{headers:t.headers,items:t.listMap,"items-per-page":t.itemsPerPage,"item-key":"PrimKey","hide-default-footer":"","no-data-text":"Không có dữ liệu",loading:t.loadingData,"loading-text":"Đang tải... ","item-text":"name"},scopedSlots:t._u([{key:"item.chon",fn:function(t){t.index}},{key:"item.stt",fn:function(a){var o=a.index;return[e("td",[t._v(t._s(o+1))])]}},{key:"item.thaotac",fn:function(a){var o=a.item;return[t.checkActionAddAndUpdate?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"#2161b1",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.editMap(o)}}},"v-btn",n,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-pencil")])],1)]}}],null,!0)},[e("span",[t._v("Sửa")])]):t._e(),t.checkActionDelete?e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(a){var i=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{color:"red",text:"",icon:""},on:{click:function(a){return a.stopPropagation(),t.deleteMap(o)}}},"v-btn",n,!1),i),[e("v-icon",{attrs:{size:"18"}},[t._v("mdi-delete")])],1)]}}],null,!0)},[e("span",[t._v("Xóa")])]):t._e()]}}]),model:{value:t.selected,callback:function(a){t.selected=a},expression:"selected"}}),t.pageCount?e("pagination",{attrs:{pageInput:t.page,total:t.total,pageCount:t.pageCount},on:{"tiny:change-page":t.handlechangePage}}):t._e()],1)],1),t.dialogForm?e("div",[e("v-dialog",{attrs:{"max-width":"1000",persistent:""},model:{value:t.dialogForm,callback:function(a){t.dialogForm=a},expression:"dialogForm"}},[e("v-card",[e("v-toolbar",{staticClass:"px-3",attrs:{dark:"",color:"primary"}},[t.edittingForm?e("v-toolbar-title",[t._v("Cập nhật bản đồ")]):t._e(),t.edittingForm?t._e():e("v-toolbar-title",[t._v("Thêm mới bản đồ")]),e("v-spacer"),e("v-toolbar-items",[e("v-btn",{attrs:{icon:"",dark:""},on:{click:t.closeModalForm}},[e("v-icon",[t._v("mdi-close")])],1)],1)],1),e("FormBanDo",{ref:"formBanDoRef",attrs:{dataEdit:t.dataEdit},on:{emitDataArea:t.handleEmitDataArea,emitDataTypeMap:t.handleEmitDataTypeMap}}),e("v-card-text",{staticClass:"px-2 py-2"},[e("v-card-actions",{staticClass:"justify-center my-4"},[e("v-btn",{staticClass:"white--text mr-2",attrs:{small:"",depressed:"",color:"red",loading:t.loadingAction,disabled:t.loadingAction},on:{click:t.closeModalForm}},[e("v-icon",{attrs:{left:""}},[t._v(" mdi-close ")]),t._v(" "+t._s(t.$t("basic.thoat"))+" ")],1),t.readonlyForm?t._e():e("v-btn",{staticClass:"mr-2",attrs:{small:"",depressed:"",color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(a){return t.submitForm.apply(null,arguments)}}},[e("v-icon",{attrs:{left:"",dark:"",size:"18"}},[t._v(" mdi-file-document-plus-outline ")]),t.edittingForm?e("span",[t._v("Cập nhật")]):e("span",[t._v("Thêm mới")])],1)],1)],1)],1)],1)],1):t._e()],1)},i=[],n=(e("13d5"),e("e20e")),s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-form",{ref:"formBanDoRef",staticClass:"dialog-body",attrs:{"lazy-validation":""},model:{value:t.validForm,callback:function(a){t.validForm=a},expression:"validForm"}},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12"}},[e("div",{staticClass:"titleText mb-2"},[t._v(" Tên địa điểm: "),e("span",{staticStyle:{color:"red"}},[t._v("*")])]),e("v-text-field",{staticClass:"flex input-form",attrs:{rules:[t.rules.required],solo:"",label:"Nhập tên đầy đủ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.TenDiaDiem,callback:function(a){t.$set(t.formData,"TenDiaDiem",a)},expression:"formData.TenDiaDiem"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Kinh độ:")]),e("v-text-field",{staticClass:"flex input-form",attrs:{solo:"",label:"Nhập kinh độ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.kinhDo,callback:function(a){t.$set(t.formData,"kinhDo",a)},expression:"formData.kinhDo"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Vĩ độ:")]),e("v-text-field",{staticClass:"flex input-form",attrs:{solo:"",label:"Nhập vĩ độ...",dense:"","hide-details":"auto",required:""},model:{value:t.formData.viDo,callback:function(a){t.$set(t.formData,"viDo",a)},expression:"formData.viDo"}})],1)],1),e("v-row",[e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Loại bản đồ:")]),e("v-autocomplete",{staticClass:"flex input-form",attrs:{items:t.listTypeMap,label:"Chọn",dense:"",solo:""},model:{value:t.formData.LoaiBanDo,callback:function(a){t.$set(t.formData,"LoaiBanDo",a)},expression:"formData.LoaiBanDo"}})],1),e("v-col",{attrs:{cols:"12",sm:"6"}},[e("div",{staticClass:"titleText mb-2"},[t._v("Khu vực:")]),e("v-autocomplete",{staticClass:"flex input-form",attrs:{items:t.listArea,label:"Chọn",dense:"",solo:""},model:{value:t.formData.KhuVuc,callback:function(a){t.$set(t.formData,"KhuVuc",a)},expression:"formData.KhuVuc"}})],1)],1)],1)},l=[],c={props:["dataEdit"],data(){var t,a,e,o,i,n,s,l,c;return{formData:{TenDiaDiem:(null===(t=this.dataEdit)||void 0===t?void 0:t.TenDiaDiem)||"",LoaiBanDo:(null===(a=this.dataEdit)||void 0===a||null===(e=a.LoaiBanDo)||void 0===e?void 0:e.MddLoaiBanDo)||"",kinhDo:(null===(o=this.dataEdit)||void 0===o||null===(i=o.ToaDo)||void 0===i?void 0:i.Longitude)||"",viDo:(null===(n=this.dataEdit)||void 0===n||null===(s=n.ToaDo)||void 0===s?void 0:s.Latitude)||"",KhuVuc:(null===(l=this.dataEdit)||void 0===l||null===(c=l.KhuVuc)||void 0===c?void 0:c.MddKhuVuc)||""},validForm:!1,listArea:[],listTypeMap:[],rules:{required:t=>!!t||"Không được để trống."}}},mounted(){console.log("moun")},created(){const t=this;t.getListArea(),t.getListTypeMap(),console.log("cretate",this.dataEdit,t.unitId,t.checkActionUpload)},computed:{},methods:{validateForm(){let t=this;return t.$refs.formBanDoRef.validate()},getListArea(){let t=this;t.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},e={collectionName:"khuvuc",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){t.$emit("emitDataArea",a.content),t.listArea=a.content.map(t=>({text:t.TenKhuVuc,value:t.MaDinhDanh})),console.log("res: ",t.listArea)})).catch((function(){t.loadingData=!1}))},getListTypeMap(){let t=this;t.loadingData=!0;const a={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},e={collectionName:"loaibando",data:a};t.$store.dispatch("collectionFilter",e).then((function(a){t.$emit("emitDataTypeMap",a.content),t.listTypeMap=a.content.map(t=>({text:t.TenLoaiBanDo,value:t.MaDinhDanh})),console.log("res: ",a.content)})).catch((function(){t.loadingData=!1}))}}},r=c,d=e("2877"),u=e("6544"),m=e.n(u),h=e("c6a6"),p=e("62ad"),_=e("4bd4"),A=e("0fd9"),v=e("8654"),D=Object(d["a"])(r,s,l,!1,null,null,null),f=D.exports;m()(D,{VAutocomplete:h["a"],VCol:p["a"],VForm:_["a"],VRow:A["a"],VTextField:v["a"]});var g=e("854a"),T=e.n(g),N=e("3168"),M=e("4624"),C={components:{Pagination:n["a"],FormBanDo:f},mixins:[M["a"]],data(){return{selected:[],textSearch:"",headers:[{sortable:!1,text:"STT",align:"center",value:"stt",width:15},{sortable:!1,text:"Tên địa điểm",align:"left",value:"TenDiaDiem",class:"th-center",width:120},{sortable:!1,text:"Khu vực",align:"left",value:"KhuVuc.TenKhuVuc",class:"th-center",width:120},{sortable:!1,text:"Thao tác",align:"left",value:"thaotac",class:"th-center",width:68}],listMap:[],itemsPerPage:20,loadingData:!1,pageCount:1,page:0,edittingForm:!1,dialogForm:!1,readonlyForm:!1,loadingAction:!1,total:1,dataEdit:{},dialogDelete:!1,idMap:"",emitDataArea:[],emitDataTypeMap:"",checkActionAuthor:!1,checkActionAddAndUpdate:"",checkActionDelete:""}},created(){const t=this;t.checkActionAddAndUpdate=t.handleCheckActionAuthor(N["a"].CAP_NHAT_VA_THEM_BAN_DO),t.checkActionDelete=t.handleCheckActionAuthor(N["a"].XOA_BAN_DO),t.getListMap()},mounted(){console.log("select: ",this.selected)},methods:{getListMapFilter(){const t=this;console.log("tim kiếm"),t.getListMap({TenBanDoSo:t.textSearch}),t.textSearch=""},getListMap(t){let a=this;a.loadingData=!0;const e={page:0,size:20,keyword:"",orderFields:"",orderTypes:"",tinhTrang:"",thamChieu_maMuc:""},o={collectionName:"bandoso",data:t?{...e,...t}:e};a.$store.dispatch("collectionFilter",o).then((function(t){a.listMap=t.content.map(t=>({...t})),console.log("res: ",a.listMap),a.total=a.listMap.length,a.pageCount=t.totalPages,a.loadingData=!1})).catch((function(){a.loadingData=!1}))},deleteMap(t){const a=this;a.dialogDelete=!1;const e={payload:t.PrimKey,type:"bandoso"};a.$store.commit("SET_SHOWCONFIRM",!0);let o={auth:!1,title:"Xóa tài liệu đính kèm",message:"Bạn có chắc chắn muốn xóa tài liệu này",button:{yes:"Có",no:"Không"},callback:()=>{a.$store.dispatch("deleteItemData",e).then((function(e){T.a.success("Xóa thành công"),a.listMap=a.listMap.reduce((function(a,e){return t.PrimKey!==e.PrimKey&&a.push(e),a}),[]),a.total=a.listMap.length,console.log("res dele: ",e)})).catch((function(){a.loadingData=!1}))}};a.$store.commit("SET_CONFIG_CONFIRM_DIALOG",o)},editMap(t){const a=this;a.edittingForm=!0,console.log("item edit: ",t),a.dataEdit=t,a.dialogForm=!0},handlechangePage(t){const a=this;a.getListMap(t)},showModalForm(){const t=this;t.dialogForm=!0,t.edittingForm=!1},closeModalForm(){const t=this;t.dialogForm=!1,t.dataEdit={}},handleEmitDataArea(t){const a=this;a.emitDataArea=t},handleEmitDataTypeMap(t){const a=this;a.emitDataTypeMap=t},submitForm(){const t=this;if(t.$refs.formBanDoRef.validateForm()){const a=t.$refs.formBanDoRef.formData,e={...a,ToaDo:{Latitude:a.viDo,Longitude:a.kinhDo}};if(e.LoaiBanDo=t.emitDataTypeMap.reduce((t,e)=>a.LoaiBanDo===e.MaDinhDanh?{...t,MddLoaiBanDo:e.MaDinhDanh,TenLoaiBanDo:e.TenLoaiBanDo,MaIcon:e.MaIcon}:t,{}),e.KhuVuc=t.emitDataArea.reduce((t,e)=>a.KhuVuc===e.MaDinhDanh?{...t,TenKhuVuc:e.TenKhuVuc,ToaDo:e.ToaDo,MddKhuVuc:e.MaDinhDanh}:t,{}),delete e.kinhDo,delete e.viDo,t.edittingForm){const a={payload:e,type:"bandoso",id:t.dataEdit.PrimKey};t.$store.dispatch("editItemData",a).then((function(a){T.a.success("Cập nhật thành công"),t.dialogForm=!1,t.listMap=t.listMap.reduce((e,o)=>t.dataEdit.PrimKey===o.PrimKey?[...e,{...o,...a.data.resp}]:[...e,o],[]),console.log("res edit: ",a,e,t.dataEdit.PrimKey,t.listMap),t.dataEdit={}})).catch((function(){t.loadingData=!1,T.a.error("Vui lòng kiểm tra lại dữ liệu nhập vào các trường")}))}else{const a={payload:e,type:"bandoso"};t.$store.dispatch("createItemData",a).then((function(a){if(T.a.success("Thêm mới thành công"),t.listMap.length<t.itemsPerPage){const e=[...t.listMap];e.push({...a.data.resp}),t.listMap=e}t.dialogForm=!1,t.total=t.listMap.length,console.log("res post: ",a)})).catch((function(a){t.loadingData=!1}))}console.log("submit",a,t.emitDataArea,t.emitDataTypeMap,e)}}}},b=C,L=e("8336"),I=e("b0af"),y=e("99d9"),B=e("8fea"),k=e("169a"),E=e("132d"),V=e("2fa4"),x=e("71d9"),F=e("2a7f"),O=e("3a2f"),P=Object(d["a"])(b,o,i,!1,null,"73450962",null);a["default"]=P.exports;m()(P,{VBtn:L["a"],VCard:I["a"],VCardActions:y["a"],VCardText:y["b"],VCol:p["a"],VDataTable:B["a"],VDialog:k["a"],VIcon:E["a"],VRow:A["a"],VSpacer:V["a"],VToolbar:x["a"],VToolbarItems:F["a"],VToolbarTitle:F["b"],VTooltip:O["a"]})}}]);